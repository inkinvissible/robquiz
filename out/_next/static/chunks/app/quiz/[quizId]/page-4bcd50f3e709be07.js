(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{7090:(e,s,t)=>{"use strict";t.d(s,{QuizClient:()=>L});var r=t(5155),n=t(2115),a=t(7481);let i=e=>"quizmaster-progress-".concat(e);var l=t(9434);let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});c.displayName="Card";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...n})});o.displayName="CardHeader";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});d.displayName="CardTitle";let u=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...n})});u.displayName="CardDescription";let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...n})});m.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter";var x=t(9708),f=t(2085);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=n.forwardRef((e,s)=>{let{className:t,variant:n,size:a,asChild:i=!1,...c}=e,o=i?x.DX:"button";return(0,r.jsx)(o,{className:(0,l.cn)(h({variant:n,size:a,className:t})),ref:s,...c})});function p(e){let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...t})}function b(){return(0,r.jsxs)(c,{className:"w-full max-w-2xl",children:[(0,r.jsxs)(o,{children:[(0,r.jsx)(p,{className:"h-4 w-3/4 mb-4"}),(0,r.jsx)(p,{className:"h-8 w-1/2"})]}),(0,r.jsxs)(m,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{className:"h-5 w-5 rounded-full"}),(0,r.jsx)(p,{className:"h-6 w-full"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{className:"h-5 w-5 rounded-full"}),(0,r.jsx)(p,{className:"h-6 w-full"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{className:"h-5 w-5 rounded-full"}),(0,r.jsx)(p,{className:"h-6 w-3/4"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{className:"h-5 w-5 rounded-full"}),(0,r.jsx)(p,{className:"h-6 w-1/2"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(p,{className:"h-10 w-28"})})]})]})}g.displayName="Button";var j=t(5863);let v=n.forwardRef((e,s)=>{let{className:t,value:n,...a}=e;return(0,r.jsx)(j.bL,{ref:s,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...a,children:(0,r.jsx)(j.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});function N(e){let{currentQuestionIndex:s,totalQuestions:t,correctCount:n,incorrectCount:a}=e,i=n+a,l=t>0?i/t*100:0;return(0,r.jsxs)("div",{className:"w-full space-y-3 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("p",{className:"font-medium text-muted-foreground",children:["Pregunta ",s+1," de ",t]}),(0,r.jsxs)("div",{className:"flex gap-4 font-semibold",children:[(0,r.jsxs)("span",{className:"text-green-600",children:["Correctas: ",n]}),(0,r.jsxs)("span",{className:"text-red-600",children:["Incorrectas: ",a]})]})]}),(0,r.jsx)(v,{value:l,"aria-label":"".concat(Math.round(l),"% completado")})]})}v.displayName=j.bL.displayName;var w=t(7454),y=t(154);let S=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(w.bL,{className:(0,l.cn)("grid gap-2",t),...n,ref:s})});S.displayName=w.bL.displayName;let C=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(w.q7,{ref:s,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:(0,r.jsx)(w.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(y.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});C.displayName=w.q7.displayName;var A=t(6981),I=t(518);let k=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(A.bL,{ref:s,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...n,children:(0,r.jsx)(A.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(I.A,{className:"h-4 w-4"})})})});k.displayName=A.bL.displayName;var Q=t(968);let R=(0,f.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),T=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(Q.b,{ref:s,className:(0,l.cn)(R(),t),...n})});T.displayName=Q.b.displayName;var E=t(8127),_=t(4371);function O(e){let{question:s,selectedAnswers:t,onAnswerSelect:n,isSubmitted:a}=e,i=e=>{if(!a)return"";let r=s.correctAnswers.includes(e),n=t.includes(e);return r?"border-green-500 bg-green-500/10 text-green-700":n&&!r?"border-red-500 bg-red-500/10 text-red-700":"text-muted-foreground"},c=e=>{if(!a)return null;let n=s.correctAnswers.includes(e),i=t.includes(e);return n?(0,r.jsx)(E.A,{className:"h-5 w-5 text-green-500"}):i&&!n?(0,r.jsx)(_.A,{className:"h-5 w-5 text-red-500"}):(0,r.jsx)("div",{className:"h-5 w-5"})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o,{children:[(0,r.jsx)(d,{className:"text-2xl font-bold leading-tight",children:s.question}),(0,r.jsx)(u,{children:"single"===s.type?"Selecciona una respuesta.":"Selecciona todas las respuestas correctas."})]}),(0,r.jsx)(m,{className:"space-y-4",children:"single"===s.type?(0,r.jsx)(S,{value:t[0]||"",onValueChange:n,disabled:a,children:s.options.map(e=>(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center space-x-3 rounded-lg border p-4 transition-all",i(e)),children:[(0,r.jsx)(C,{value:e,id:e}),(0,r.jsx)(T,{htmlFor:e,className:"flex-1 cursor-pointer",children:e}),c(e)]},e))}):(0,r.jsx)("div",{className:"space-y-4",children:s.options.map(e=>(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center space-x-3 rounded-lg border p-4 transition-all",i(e)),children:[(0,r.jsx)(k,{id:e,checked:t.includes(e),onCheckedChange:()=>n(e),disabled:a}),(0,r.jsx)(T,{htmlFor:e,className:"flex-1 cursor-pointer",children:e}),c(e)]},e))})})]})}var z=t(8186),D=t(1203),F=t(5078),M=t(6874),P=t.n(M);function q(e){let{correctCount:s,incorrectCount:t,totalQuestions:n,onReset:a,onRetryIncorrect:i}=e;return(0,r.jsxs)(c,{className:"w-full max-w-2xl text-center shadow-lg animate-in fade-in zoom-in-95",children:[(0,r.jsxs)(o,{children:[(0,r.jsx)(d,{className:"text-3xl font-bold text-primary",children:"\xa1Cuestionario Completado!"}),(0,r.jsx)(u,{className:"text-lg",children:"Este es tu puntaje final."})]}),(0,r.jsxs)(m,{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex justify-around items-center p-6 bg-secondary rounded-lg",children:[(0,r.jsxs)("div",{className:"text-green-600",children:[(0,r.jsx)("p",{className:"text-5xl font-bold",children:s}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"CORRECTAS"})]}),(0,r.jsxs)("div",{className:"text-red-600",children:[(0,r.jsx)("p",{className:"text-5xl font-bold",children:t}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"INCORRECTAS"})]})]}),(0,r.jsxs)("p",{className:"text-muted-foreground font-medium",children:["Respondiste ",s," de ",n," preguntas correctamente."]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4 pt-4",children:[(0,r.jsx)(P(),{href:"/",children:(0,r.jsxs)(g,{size:"lg",variant:"outline",children:[(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"Volver al Inicio"]})}),t>0&&(0,r.jsxs)(g,{onClick:i,size:"lg",className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:[(0,r.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Reintentar Incorrectas"]}),(0,r.jsxs)(g,{onClick:a,size:"lg",children:[(0,r.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Jugar de Nuevo"]})]})]})]})}function L(e){let{allQuestions:s,quizId:t}=e,{state:o,currentQuestion:d,totalQuestions:u,actions:m}=function(e,s){let{toast:t}=(0,a.dj)(),[r,l]=(0,n.useState)({status:"loading",activeQuestions:[],currentQuestionIndex:0,selectedAnswers:[],isSubmitted:!1,correctCount:0,incorrectCount:0,incorrectlyAnsweredIds:[],isShaking:!1}),c=(0,n.useCallback)(e=>{l({status:"active",activeQuestions:e,currentQuestionIndex:0,selectedAnswers:[],isSubmitted:!1,correctCount:0,incorrectCount:0,incorrectlyAnsweredIds:[],isShaking:!1})},[]);(0,n.useEffect)(()=>{let t=i(s);try{let s=localStorage.getItem(t);if(s){let t=JSON.parse(s),r=t.activeQuestions.map(s=>e.find(e=>e.id===s.id)).filter(Boolean);r.length>0?l({...t,activeQuestions:r,status:t.status||"active"}):c(e)}else c(e)}catch(s){console.error("Failed to load from localStorage",s),c(e)}},[s,e,c]),(0,n.useEffect)(()=>{if("loading"!==r.status&&r.activeQuestions.length>0){let e=i(s);try{let s={...r,isShaking:!1};localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error("Failed to save to localStorage",e)}}},[r,s]);let o=(0,n.useCallback)(e=>{if(r.isSubmitted)return;let s=r.activeQuestions[r.currentQuestionIndex];s&&l(t=>{let r;return r="single"===s.type?[e]:t.selectedAnswers.includes(e)?t.selectedAnswers.filter(s=>s!==e):[...t.selectedAnswers,e],{...t,selectedAnswers:r}})},[r.isSubmitted,r.activeQuestions,r.currentQuestionIndex]),d=(0,n.useCallback)(()=>{if(r.isSubmitted||0===r.selectedAnswers.length)return;let e=r.activeQuestions[r.currentQuestionIndex];if(!e)return;let s=e.correctAnswers.sort(),n=r.selectedAnswers.sort();s.length===n.length&&s.every((e,s)=>e===n[s])?(l(e=>({...e,isSubmitted:!0,correctCount:e.correctCount+1})),t({title:"\xa1Correcto!",description:"\xa1Buen trabajo!",duration:2e3})):(l(s=>({...s,isSubmitted:!0,incorrectCount:s.incorrectCount+1,incorrectlyAnsweredIds:Array.from(new Set([...s.incorrectlyAnsweredIds,e.id])),isShaking:!0})),setTimeout(()=>l(e=>({...e,isShaking:!1})),820))},[r.isSubmitted,r.selectedAnswers,r.activeQuestions,r.currentQuestionIndex,t]),u=(0,n.useCallback)(()=>{if(!r.isSubmitted)return;let e=r.currentQuestionIndex+1;e<r.activeQuestions.length?l(s=>({...s,currentQuestionIndex:e,selectedAnswers:[],isSubmitted:!1})):l(e=>({...e,status:"completed"}))},[r.isSubmitted,r.currentQuestionIndex,r.activeQuestions.length]),m=(0,n.useCallback)(()=>{let t=i(s);localStorage.removeItem(t),c(e)},[e,c,s]),x=(0,n.useCallback)(()=>{let t=e.filter(e=>r.incorrectlyAnsweredIds.includes(e.id));if(t.length>0){let e=i(s);localStorage.removeItem(e),c(t)}},[e,r.incorrectlyAnsweredIds,c,s]),f=(0,n.useMemo)(()=>r.activeQuestions[r.currentQuestionIndex],[r.activeQuestions,r.currentQuestionIndex]);return{state:r,currentQuestion:f,totalQuestions:r.activeQuestions.length,actions:{handleAnswerSelect:o,handleSubmit:d,handleNext:u,handleReset:m,handleRetryIncorrect:x}}}(s,t);return"loading"!==o.status&&d?"completed"===o.status?(0,r.jsx)(q,{correctCount:o.correctCount,incorrectCount:o.incorrectCount,totalQuestions:s.length,onReset:m.handleReset,onRetryIncorrect:m.handleRetryIncorrect}):(0,r.jsxs)(c,{className:(0,l.cn)("w-full max-w-2xl shadow-xl transition-transform duration-500",o.isShaking&&"animate-shake"),children:[(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(N,{currentQuestionIndex:o.currentQuestionIndex,totalQuestions:u,correctCount:o.correctCount,incorrectCount:o.incorrectCount})}),(0,r.jsx)(O,{question:d,selectedAnswers:o.selectedAnswers,onAnswerSelect:m.handleAnswerSelect,isSubmitted:o.isSubmitted}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-t mt-2",children:[(0,r.jsxs)(g,{onClick:m.handleReset,variant:"outline",size:"lg",children:[(0,r.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Reiniciar"]}),o.isSubmitted?(0,r.jsx)(g,{onClick:m.handleNext,size:"lg",className:"bg-primary",children:o.currentQuestionIndex===u-1?"Finalizar Cuestionario":"Siguiente Pregunta"}):(0,r.jsx)(g,{onClick:m.handleSubmit,disabled:0===o.selectedAnswers.length,size:"lg",className:"bg-accent hover:bg-accent/90 text-accent-foreground",children:"Enviar Respuesta"})]})]}):(0,r.jsx)(b,{})}},7481:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var r=t(2115);let n=0,a=new Map,i=e=>{if(a.has(e))return;let s=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...s}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=r.useState(o);return r.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8320:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.bind(t,7090))},9434:(e,s,t)=>{"use strict";t.d(s,{cn:()=>a});var r=t(2596),n=t(9688);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,r.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[310,874,697,441,684,358],()=>s(8320)),_N_E=e.O()}]);